<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="浙江大学 2023 秋冬《程序设计与算法基础》课程网站" name="description"/>
<link href="https://zhoutimemachine.github.io/2023_FPA/debug/dynamic_debug/" rel="canonical"/>
<link href="../static_debug/" rel="prev"/>
<link href="../debug_sample/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.4.6" name="generator"/>
<title>动态调试 - ZJU FPA 2023 Fall</title>
<link href="../../assets/stylesheets/main.35e1ed30.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.356b1318.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../css/heti.css" rel="stylesheet"/>
<link href="https://cdn.tonycrane.cc/utils/katex.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:500,500i,600,600i&amp;display=fallback" rel="stylesheet"/>
<link href="../../css/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="ZJU FPA 2023 Fall" class="md-header__button md-logo" data-md-component="logo" href="../.." title="ZJU FPA 2023 Fall">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            ZJU FPA 2023 Fall
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              动态调试
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="夜间模式" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="夜间模式">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</label>
<input aria-label="日间模式" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="teal" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="日间模式">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" title="清空当前内容" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ZhouTimeMachine/2023_FPA/" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    ZTM/2023_FPA
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="ZJU FPA 2023 Fall" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="ZJU FPA 2023 Fall">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    ZJU FPA 2023 Fall
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ZhouTimeMachine/2023_FPA/" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    ZTM/2023_FPA
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    主页
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    环境搭建
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            环境搭建
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../env/">
<span class="md-ellipsis">
    章节概述
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../env/first_C/">
<span class="md-ellipsis">
    第一个 C 语言程序
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../env/C_compiler/">
<span class="md-ellipsis">
    安装 C 语言编译器
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../env/windows_lost/">
<span class="md-ellipsis">
    Windows 使用拾遗
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../env/local_env/">
<span class="md-ellipsis">
    本地 C 语言编辑器选择
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../env/vsc_install/">
<span class="md-ellipsis">
    VSCode 安装与配置
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    调试技术
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            调试技术
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    章节概述
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../static_debug/">
<span class="md-ellipsis">
    静态调试
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    动态调试
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    动态调试
  </span>
</a>
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#printf">
    printf 大法
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vscode">
    VSCode 配置调试
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb">
    GDB 使用基础（可选）
  </a>
<nav aria-label="GDB 使用基础（可选）" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb_1">
    什么是 GDB
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb_2">
    GDB 基本命令介绍
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb_3">
    GDB 安装指南
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debug_sample/">
<span class="md-ellipsis">
    调试样例
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/">
<span class="md-ellipsis">
    FAQ
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="目录" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      目录
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#printf">
    printf 大法
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vscode">
    VSCode 配置调试
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb">
    GDB 使用基础（可选）
  </a>
<nav aria-label="GDB 使用基础（可选）" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb_1">
    什么是 GDB
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb_2">
    GDB 基本命令介绍
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gdb_3">
    GDB 安装指南
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="_1">动态跟踪</h1>
<h2 id="printf"><span>printf<span class="heti-spacing"> </span></span>大法</h2>
<blockquote>
<p><span>printf<span class="heti-spacing"> </span></span>大法不专指 <code>printf</code>，在<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>中也可以是 <code>puts</code> 等输出函数，又或许是<span class="heti-skip"><span class="heti-spacing"> </span>C++<span class="heti-spacing"> </span></span>的 <code>cout</code>、<span>Python<span class="heti-spacing"> </span></span>的 <code>print</code>、<span>Java<span class="heti-spacing"> </span></span>的 <code>System.out.println</code>，甚至是打日志</p>
</blockquote>
<p><span>printf<span class="heti-spacing"> </span></span>大法的强大之处在于它可以在程序的各种位置灵活输出你所关心的变量值，开发人员通过<span class="heti-skip"><span class="heti-spacing"> </span>printf<span class="heti-spacing"> </span></span>侧面剖析程序的运行情况，从而确定问题症结。在业界应用中，<span>printf<span class="heti-spacing"> </span></span>大法甚至可以让上线的代码继续维持运行，只是在关键节点打印信息以检查错误，减少服务下线带来的损失。</p>
<p>在这里介绍一下我本人应用<span class="heti-skip"><span class="heti-spacing"> </span>printf<span class="heti-spacing"> </span></span>的框架：</p>
<ul>
<li>定位问题发生的区域</li>
<li>定位异常变量</li>
<li>定位问题发生的代码</li>
</ul>
<p>例如程序陷入了死循环，那么可以</p>
<ul>
<li>定位问题发生的区域：各个循环前后设置<span><span class="heti-spacing"> </span>printf</span>，根据输出初步判断在哪个循环发生了死循环</li>
<li>定位异常变量：关注这个死循环，打印你所关心的几个变量，看看哪个变量和预期结果不符</li>
<li>定位问题发生的代码：静态思考，或者在循环内部代码级设置<span><span class="heti-spacing"> </span>printf</span>，定位哪一句发生了问题</li>
<li>如果一句代码中做了很多事，那么可以拆分这句代码进行更细粒度的分析</li>
</ul>
<p>因此建议<strong>不要压行</strong>，一句代码不必做太多事情，否则不仅阅读有困难，调试也会比较麻烦。</p>
<h2 id="vscode"><span>VSCode<span class="heti-spacing"> </span></span>配置调试</h2>
<p>可以参考<a href="https://blog.gztime.cc/posts/2020/6b9b4626/#%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4"><span class="heti-skip"><span class="heti-spacing"> </span>GZTime<span class="heti-spacing"> </span></span>的教程</a>，从<span class="heti-skip"><span class="heti-spacing"> </span>1.3.3<span class="heti-spacing"> </span></span>开始跟着配置。注意一下按照这个教程需要按照其要求的文件组织形式工作，并且不管<span class="heti-skip"><span class="heti-spacing"> </span>C/C++<span class="heti-spacing"> </span></span>程序都会使用<span class="heti-skip"><span class="heti-spacing"> </span>g++<span class="heti-spacing"> </span></span>编译。比较熟练的同学可以通过自行修改 <code>tasks.json</code> 和 <code>launch.json</code> 进行自己的配置。</p>
<div class="admonition info">
<p class="admonition-title">希望快速上手的同学可以按接下来的引导配置，面向单文件编译，编译产生的可执行程序与源代码在同一目录下</p>
</div>
<p>在工作目录的 <code>.vscode</code> 文件夹下创建 <code>tasks.json</code> 和 <code>launch.json</code> 文件。如果还没有 <code>.vscode</code> 文件夹，则手动创建一个。<code>tasks.json</code> 的内容为
</p><div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="c1">// See https://go.microsoft.com/fwlink/?LinkId=733558</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="c1">// for the documentation about the tasks.json format</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0"</span><span class="p">,</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="nt">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C build"</span><span class="p">,</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shell"</span><span class="p">,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">            </span><span class="nt">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gcc"</span><span class="p">,</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">            </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">                </span><span class="s2">"${file}"</span><span class="p">,</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">                </span><span class="s2">"-o"</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">                </span><span class="s2">"${fileDirname}/${fileBasenameNoExtension}"</span><span class="p">,</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">                </span><span class="s2">"-g"</span><span class="p">,</span><span class="w"> </span><span class="c1">// 生成和调试有关的信息</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">                </span><span class="s2">"-Wall"</span><span class="p">,</span><span class="w"> </span><span class="c1">// 开启额外警告</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">                </span><span class="s2">"-std=gnu11"</span><span class="w"> </span><span class="c1">// 使用 c11 标准，或根据自己的需要进行修改</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">            </span><span class="p">],</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">            </span><span class="nt">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build"</span><span class="p">,</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">            </span><span class="nt">"presentation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">                </span><span class="c1">// Reveal the output only if unrecognized errors occur.</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">                </span><span class="nt">"reveal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"silent"</span><span class="p">,</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">                </span><span class="nt">"revealProblems"</span><span class="p">:</span><span class="w"> </span><span class="s2">"onProblem"</span><span class="p">,</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">                </span><span class="nt">"close"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">            </span><span class="c1">// Use the standard MS compiler pattern to detect errors, warnings and infos</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">            </span><span class="nt">"problemMatcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$msCompile"</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>launch.json</code> 的内容为</p>
<div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="c1">// 使用 IntelliSense 了解相关属性。</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="c1">// 悬停以查看现有属性的描述。</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="c1">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2.0"</span><span class="p">,</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="nt">"configurations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C Launch"</span><span class="p">,</span><span class="w"> </span><span class="c1">// 启动项的名称</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cppdbg"</span><span class="p">,</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">            </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launch"</span><span class="p">,</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">            </span><span class="nt">"targetArchitecture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x64"</span><span class="p">,</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">            </span><span class="nt">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${fileDirname}/${fileBasenameNoExtension}.exe"</span><span class="p">,</span><span class="w"> </span><span class="c1">// 运行文件的路径</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">            </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">// 运行文件的参数，一般没有</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">            </span><span class="nt">"stopAtEntry"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// 是否在入口点处暂停</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">            </span><span class="nt">"cwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${fileDirname}"</span><span class="p">,</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">            </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">            </span><span class="nt">"externalConsole"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">            </span><span class="nt">"internalConsoleOptions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"neverOpen"</span><span class="p">,</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">            </span><span class="nt">"MIMode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gdb"</span><span class="p">,</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">            </span><span class="nt">"miDebuggerPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C:/TDM-GCC-64/bin/gdb64.exe"</span><span class="p">,</span><span class="w"> </span><span class="c1">// DEBUG 程序的路径</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">            </span><span class="nt">"setupCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">                </span><span class="p">{</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">                    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable pretty-printing for gdb"</span><span class="p">,</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">                    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-enable-pretty-printing"</span><span class="p">,</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="w">                    </span><span class="nt">"ignoreFailures"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="w">            </span><span class="p">],</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="w">            </span><span class="nt">"preLaunchTask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C build"</span><span class="w"> </span><span class="c1">// 运行前需要完成的任务</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="admonition info">
<p class="admonition-title">注意 <code>launch.json</code> 中的 <code>miDebuggerPath</code> 项是<span class="heti-skip"><span class="heti-spacing"> </span>gdb<span class="heti-spacing"> </span></span>的路径，对于未使用<span><span class="heti-spacing"> </span>WSL</span>、按默认目录安装了<span class="heti-skip"><span class="heti-spacing"> </span>tdm-gcc<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>Windows<span class="heti-spacing"> </span></span>用户来说不需要修改，但是其他情况（<span>tdm-gcc<span class="heti-spacing"> </span></span>不默认安装、使用<span class="heti-skip"><span class="heti-spacing"> </span>WSL<span class="heti-spacing"> </span></span>或<span class="heti-skip"><span class="heti-spacing"> </span>Mac<span class="heti-spacing"> </span></span>用户）下需要确认自己的<span class="heti-skip"><span class="heti-spacing"> </span>gdb<span class="heti-spacing"> </span></span>路径并进行修改。</p>
</div>
<p>创建源代码文件 <code>a.c</code>，如下图所示。注意 <code>a.c</code> 和 <code>.vscode</code> 文件夹是同级的。</p>
<p><img alt="vscode_debug_config" src="../graph/vscode_debug_config.png"/></p>
<p>最左侧栏切换到运行和调试，在第<span class="heti-skip"><span class="heti-spacing"> </span>9<span class="heti-spacing"> </span></span>行打上断点，选择 <code>C Launch</code> 就可以开始调试。</p>
<div class="admonition info">
<p class="admonition-title">注意运行“C Launch”之前需要在编辑器选中想要编译的<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>文件，它会默认编译调试你当前的文件</p>
</div>
<p><img alt="vscode_debugging" src="../graph/vscode_debugging.png"/></p>
<p>控制区从左到右为</p>
<ul>
<li>运行<span><span class="heti-spacing"> </span>(F5)</span>：持续运行，直到遇到断点或者程序结束</li>
<li>单步跳过<span><span class="heti-spacing"> </span>(F10)</span>：运行到下一行代码，即使这一行调用了函数也不会看到其中的执行细节</li>
<li>单步步入<span><span class="heti-spacing"> </span>(F11)</span>：执行这一步代码，如果这一步调用了函数则会进入函数内部</li>
<li>单步跳出<span><span class="heti-spacing"> </span>(F12)</span>：跳出这个函数</li>
<li>重启<span><span class="heti-spacing"> </span>(Ctrl+Shift+F5)</span>：从头开始重新调试</li>
<li>停止<span><span class="heti-spacing"> </span>(Shift+F5)</span>：停止调试</li>
</ul>
<h2 id="gdb"><span>GDB<span class="heti-spacing"> </span></span>使用基础（可选）</h2>
<div class="admonition info">
<p class="admonition-title"><span>GDB<span class="heti-spacing"> </span></span>对零基础的同学可能不太友好，可以跳过，比较熟练的同学可以考虑上手</p>
</div>
<blockquote>
<p><span>GDB<span class="heti-spacing"> </span></span>相关内容参考了<a href="https://zju-sec.github.io/os22fall-stu/"><span class="heti-skip"><span class="heti-spacing"> </span>2022<span class="heti-spacing"> </span></span>秋操作系统原理与实践实验文档</a>（已失效）</p>
</blockquote>
<h3 id="gdb_1">什么是<span><span class="heti-spacing"> </span>GDB</span></h3>
<p>GDB，全称<span><span class="heti-spacing"> </span>GNU Debugger</span>，是一个功能强大的程序调试器。借助<span class="heti-skip"><span class="heti-spacing"> </span>GDB<span class="heti-spacing"> </span></span>等调试器，我们能够查看另一个程序在执行时实际在做什么（比如访问哪些内存、寄存器<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，在其他程序崩溃的时候可以比较快速地了解导致程序崩溃的原因。</p>
<p><span>GDB<span class="heti-spacing"> </span></span>可以进行本地调试<span class="heti-skip"><span class="heti-spacing"> </span>(native debug)<span class="heti-spacing"> </span></span>或远程调试<span><span class="heti-spacing"> </span>(remote debug)</span>：</p>
<ul>
<li>本地调试：被调试的程序可以和<span class="heti-skip"><span class="heti-spacing"> </span>GDB<span class="heti-spacing"> </span></span>运行在同一台机器上，并由<span class="heti-skip"><span class="heti-spacing"> </span>GDB<span class="heti-spacing"> </span></span>控制</li>
<li>远程调试：被调试的程序只和<span class="heti-skip"><span class="heti-spacing"> </span>gdb-server<span class="heti-spacing"> </span></span>运行在同一台机器上，由连接着<span class="heti-skip"><span class="heti-spacing"> </span>gdb-server<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>GDB<span class="heti-spacing"> </span></span>进行控制</li>
</ul>
<div class="admonition info">
<p class="admonition-title"><span>GDB<span class="heti-spacing"> </span></span>由<span class="heti-skip"><span class="heti-spacing"> </span>GNU<span class="heti-spacing"> </span></span>开源组织发布，工作于类<span class="heti-skip"><span class="heti-spacing"> </span>Unix<span class="heti-spacing"> </span></span>操作系统。希望直接使用<span class="heti-skip"><span class="heti-spacing"> </span>GDB<span class="heti-spacing"> </span></span>的同学，如果是<span class="heti-skip"><span class="heti-spacing"> </span>Mac<span class="heti-spacing"> </span></span>主力机没有问题，<span>Windows<span class="heti-spacing"> </span></span>主力机则建议使用<span><span class="heti-spacing"> </span>WSL</span>。</p>
</div>
<p><span>GDB<span class="heti-spacing"> </span></span>的功能十分强大，我们经常在调试中用到的有<span><span class="heti-spacing"> </span>:</span></p>
<ul>
<li>启动程序，并指定可能影响其行为的所有内容</li>
<li>使程序在指定条件下停止</li>
<li>检查程序停止时发生了什么</li>
<li>更改程序中的内容，以便纠正一个<span class="heti-skip"><span class="heti-spacing"> </span>bug<span class="heti-spacing"> </span></span>的影响</li>
</ul>
<h3 id="gdb_2"><span>GDB<span class="heti-spacing"> </span></span>基本命令介绍</h3>
<ul>
<li><code>(gdb) layout asm</code><span>:<span class="heti-spacing"> </span></span>显示汇编代码</li>
<li><code>(gdb) start</code><span>:<span class="heti-spacing"> </span></span>单步执行，运行程序，停在第一执行语句</li>
<li><code>(gdb) continue</code><span>:<span class="heti-spacing"> </span></span>从断点后继续执行，简写 <code>c</code></li>
<li><code>(gdb) next</code><span>:<span class="heti-spacing"> </span></span>单步调试（逐过程，函数直接执行<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，简写 <code>n</code></li>
<li><code>(gdb) step instruction</code><span>:<span class="heti-spacing"> </span></span>执行单条指令，简写 <code>si</code></li>
<li><code>(gdb) run</code><span>:<span class="heti-spacing"> </span></span>重新开始运行文件（run-text：加载文本文件，run-bin：加载二进制文件<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，简写 <code>r</code></li>
<li><code>(gdb) backtrace</code>：查看函数的调用的栈帧和层级关系，简写 <code>bt</code></li>
<li><code>(gdb) break</code> 设置断点，简写 <code>b</code><ul>
<li>断在 <code>foo</code> 函数：<code>b foo</code></li>
<li>断在某地址<span><span class="heti-spacing"> </span>:</span> <code>b * 0x80200000</code></li>
</ul>
</li>
<li><code>(gdb) finish</code><span>:<span class="heti-spacing"> </span></span>结束当前函数，返回到函数调用点</li>
<li><code>(gdb) frame</code><span>:<span class="heti-spacing"> </span></span>切换函数的栈帧，简写 <code>f</code></li>
<li><code>(gdb) print</code><span>:<span class="heti-spacing"> </span></span>打印值及地址，简写 <code>p</code></li>
<li><code>(gdb) info</code><span>:<span class="heti-spacing"> </span></span>查看函数内部局部变量的数值，简写 <code>i</code><ul>
<li>查看寄存器<span class="heti-skip"><span class="heti-spacing"> </span>ra<span class="heti-spacing"> </span></span>的值<span><span class="heti-spacing"> </span>:</span> <code>i r ra</code></li>
</ul>
</li>
<li><code>(gdb) display</code><span>:<span class="heti-spacing"> </span></span>追踪查看具体变量值</li>
<li><code>(gdb) x/4x &lt;addr&gt;</code><span>:<span class="heti-spacing"> </span></span>以<span class="heti-skip"><span class="heti-spacing"> </span>16<span class="heti-spacing"> </span></span>进制打印 <code>&lt;addr&gt;</code> 处开始的<span class="heti-skip"><span class="heti-spacing"> </span>16 Bytes<span class="heti-spacing"> </span></span>内容</li>
</ul>
<p>更多命令可以参考<a href="https://wizardforcel.gitbooks.io/100-gdb-tips/content/"><span class="heti-skip"><span class="heti-spacing"> </span>100<span class="heti-spacing"> </span></span>个<span class="heti-skip"><span class="heti-spacing"> </span>gdb<span class="heti-spacing"> </span></span>小技巧</a></p>
<h3 id="gdb_3"><span>GDB<span class="heti-spacing"> </span></span>安装指南</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><input id="__tabbed_1_3" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">Windows</label><label for="__tabbed_1_2">WSL</label><label for="__tabbed_1_3">macOS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><span>tdm-gcc<span class="heti-spacing"> </span></span>自带<span><span class="heti-spacing"> </span>gdb</span>（除非安装选项中没选<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，<span>MinGW<span class="heti-spacing"> </span></span>的<span class="heti-skip"><span class="heti-spacing"> </span>gcc<span class="heti-spacing"> </span></span>也一般都有自带</p>
</div>
<div class="tabbed-block">
<p>对于<span><span class="heti-spacing"> </span>Ubuntu</span>，直接执行
</p><div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a>sudo apt install gdb
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p>首先安装<span><span class="heti-spacing"> </span>Homebrew</span>，参见<a href="https://brew.sh/"><span><span class="heti-spacing"> </span>brew.sh</span></a>。随后按照<a href="https://www.ics.uci.edu/~pattis/common/handouts/macmingweclipse/allexperimental/mac-gdb-install.html">在<span class="heti-skip"><span class="heti-spacing"> </span>macOS<span class="heti-spacing"> </span></span>上安装<span class="heti-skip"><span class="heti-spacing"> </span>GDB<span class="heti-spacing"> </span></span></a>安装即可。</p>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="页脚" class="md-footer__inner md-grid">
<a aria-label="上一页: 静态调试" class="md-footer__link md-footer__link--prev" href="../static_debug/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                上一页
              </span>
<div class="md-ellipsis">
                静态调试
              </div>
</div>
</a>
<a aria-label="下一页: 调试样例" class="md-footer__link md-footer__link--next" href="../debug_sample/">
<div class="md-footer__title">
<span class="md-footer__direction">
                下一页
              </span>
<div class="md-ellipsis">
                调试样例
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2023 <a href="https://github.com/ZhouTimeMachine" rel="noopener" target="_blank">ZhouTimeMachine</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.footer"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
<script src="https://cdn.tonycrane.cc/utils/katex.min.js"></script>
<script src="../../js/katex.js"></script>
</body>
</html>